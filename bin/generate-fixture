#!/bin/bash

# Load environment variables from .env file if exists.
if [ ! -f ../.env ]; then
    export $(cat .env | xargs)
fi

if [ $1 ]; then
    url=$1
elif test ! -t 0; then
    url=$(cat)
fi

if [ ! $url ]; then
    echo "Error: URL is required."
    exit 1
fi

# Generate the fixture file for the amp-page.
./bin/px psi --json --key $PSI_API_KEY $url/amp-page/ > ./tests/fixtures/psi_local-wp_amp-page.json

echo "Generated the fixture file psi_local-wp_amp-page.json in tests/fixtures directory."
